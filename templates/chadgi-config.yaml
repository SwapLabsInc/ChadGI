# ChadGI Configuration
# Autonomous task worker configuration

# Task source - where to get tasks from
# Options: github-issues, local-file, manual
task_source: github-issues

# Template files for prompts (relative to chadgi directory)
prompt_template: ./chadgi-task.md
generate_template: ./chadgi-generate-task.md
progress_file: ./chadgi-progress.json

# GitHub configuration (used when task_source: github-issues)
github:
  repo: owner/repo
  project_number: 1
  # Project board column names (must match exactly, case-sensitive!)
  ready_column: Ready
  in_progress_column: In progress
  review_column: In review
  done_column: Done  # Used when gigachad_mode is enabled

# Branch configuration
branch:
  base: main
  prefix: feature/issue-

# Polling and timing
poll_interval: 10          # Seconds between task checks
consecutive_empty_threshold: 2  # Empty checks before generating tasks

# What to do when queue is empty
# Options: generate, wait, exit
on_empty_queue: generate

# Iteration settings (the core ChadGI pattern)
# Two-phase approach:
#   Phase 1: Implementation - Claude implements, tests locally, commits (outputs ready_promise)
#   Phase 2: PR Creation - After verification passes, Claude creates PR (outputs completion_promise)
iteration:
  max_iterations: 5           # Max attempts per task before giving up
  completion_promise: "COMPLETE"    # String Claude outputs after PR is created
  ready_promise: "READY_FOR_PR"     # String Claude outputs when implementation is done (before PR)
  # Commands to verify work (run after implementation, BEFORE PR creation)
  # Tests must pass before Claude is asked to create a PR
  test_command: "npm test"
  build_command: "npm run build"
  # What to do when max iterations reached without success
  # Options: skip (move to next task), rollback (reset branch), retry-later (move back to ready)
  on_max_iterations: skip
  # GigaChad Mode - Chad doesn't wait for reviews
  # When enabled: auto-merges PRs into target branch, moves tickets to Done, and pulls latest
  # Use at your own risk - no human review means no safety net!
  gigachad_mode: false
  # Prefix added to commit messages when GigaChad auto-merges
  # Makes it easy to identify autonomous merges in git history for rollbacks
  gigachad_commit_prefix: "[GIGACHAD]"
  # Retry delay settings for when tests fail
  retry_delay: 5              # Initial delay in seconds between retries
  retry_backoff: exponential  # Options: fixed, linear, exponential
  retry_max_delay: 60         # Maximum delay cap (seconds) for exponential backoff
  retry_jitter: false         # Add Â±20% randomness to prevent thundering herd

# Output settings
output:
  show_tool_details: true   # Show rich tool output (commands, files, etc.)
  show_cost: true           # Show cost at end of run
  truncate_length: 60       # Max length for command/path display
  show_timestamps: true     # Show timestamps in output

# Branding settings - Chad does what Chad wants
branding:
  issue_prefix: "[CHAD]"              # Prefix for issue/PR titles (set to "" to disable)
  label: "touched-by-chad"            # GitHub label added to issues (set to "" to disable)
  include_footer: true                # Include ASCII art Chad in issues/PRs
  tagline: "Chad does what Chad wants."  # The ChadGI motto

# Local file task source (used when task_source: local-file)
local_file:
  path: ./chadgi-tasks.txt
  completed_path: ./chadgi-tasks-done.txt

# Manual mode settings (used when task_source: manual)
manual:
  prompt_on_completion: true  # Ask for next task when done
